<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Guess the Country</title>
    <script src="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.css" rel="stylesheet" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #d946ef 100%);
            background-attachment: fixed;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(217, 70, 239, 0.3) 0%, transparent 50%);
            pointer-events: none;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-radius: 32px;
            box-shadow:
                0 50px 100px -20px rgba(50, 50, 93, 0.25),
                0 30px 60px -30px rgba(0, 0, 0, 0.3),
                inset 0 -2px 6px 0 rgba(10, 37, 64, 0.05);
            overflow: hidden;
            position: relative;
            z-index: 1;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .header {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #d946ef 100%);
            color: white;
            padding: 32px 24px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(circle at 30% 50%, rgba(255, 255, 255, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 70% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        h1 {
            font-size: 36px;
            font-weight: 800;
            margin-bottom: 8px;
            position: relative;
            letter-spacing: -0.5px;
            text-shadow: 0 2px 20px rgba(0, 0, 0, 0.15);
        }

        .subtitle {
            font-size: 16px;
            opacity: 0.95;
            font-weight: 500;
            position: relative;
            letter-spacing: 0.3px;
        }

        .score-tracker {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-top: 16px;
            position: relative;
        }

        .score-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            padding: 8px 16px;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .score-icon {
            font-size: 20px;
        }

        .score-value {
            font-size: 24px;
            font-weight: 800;
            color: white;
            min-width: 30px;
            text-align: center;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        #map {
            width: 100%;
            height: 450px;
            background: #0f172a;
            position: relative;
        }

        .controls {
            padding: 40px 36px;
            background: linear-gradient(180deg, #ffffff 0%, #fafafa 100%);
        }

        .rotation-control {
            margin-bottom: 36px;
            padding: 24px;
            background: white;
            border-radius: 20px;
            box-shadow:
                0 10px 25px -5px rgba(0, 0, 0, 0.08),
                0 8px 10px -6px rgba(0, 0, 0, 0.06);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .rotation-control:hover {
            box-shadow:
                0 20px 30px -5px rgba(0, 0, 0, 0.12),
                0 10px 15px -6px rgba(0, 0, 0, 0.08);
            transform: translateY(-2px);
        }

        .rotation-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            font-size: 15px;
            color: #475569;
            font-weight: 700;
            letter-spacing: 0.3px;
        }

        #bearing-value {
            font-size: 18px;
            color: #6366f1;
            font-weight: 800;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .slider-container {
            position: relative;
            padding: 8px 0;
        }

        input[type="range"] {
            width: 100%;
            height: 10px;
            border-radius: 10px;
            background: linear-gradient(90deg, #6366f1 0%, #8b5cf6 50%, #d946ef 100%);
            outline: none;
            -webkit-appearance: none;
            position: relative;
            cursor: pointer;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: white;
            cursor: grab;
            box-shadow:
                0 4px 12px rgba(99, 102, 241, 0.4),
                0 2px 6px rgba(0, 0, 0, 0.15);
            border: 4px solid #6366f1;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.15);
            box-shadow:
                0 6px 20px rgba(99, 102, 241, 0.5),
                0 3px 8px rgba(0, 0, 0, 0.2);
        }

        input[type="range"]::-webkit-slider-thumb:active {
            cursor: grabbing;
            transform: scale(1.05);
        }

        input[type="range"]::-moz-range-thumb {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: white;
            cursor: grab;
            box-shadow:
                0 4px 12px rgba(99, 102, 241, 0.4),
                0 2px 6px rgba(0, 0, 0, 0.15);
            border: 4px solid #6366f1;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        input[type="range"]::-moz-range-thumb:hover {
            transform: scale(1.15);
        }

        input[type="range"]:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        input[type="range"]:disabled::-webkit-slider-thumb {
            cursor: not-allowed;
        }

        .guess-section {
            margin-top: 28px;
        }

        .guess-title {
            font-size: 22px;
            font-weight: 800;
            margin-bottom: 20px;
            color: #1e293b;
            letter-spacing: -0.3px;
            text-align: center;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .option-btn {
            padding: 20px 16px;
            border: 3px solid #e2e8f0;
            border-radius: 16px;
            background: white;
            font-size: 17px;
            font-weight: 700;
            color: #334155;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            letter-spacing: 0.2px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }

        .option-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            opacity: 0;
            transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 0;
        }

        .option-btn span {
            position: relative;
            z-index: 1;
        }

        .option-btn:hover {
            border-color: #6366f1;
            transform: translateY(-4px) scale(1.02);
            box-shadow:
                0 20px 30px -8px rgba(99, 102, 241, 0.3),
                0 8px 16px -4px rgba(0, 0, 0, 0.1);
        }

        .option-btn:hover::before {
            opacity: 0.08;
        }

        .option-btn:active {
            transform: translateY(-2px) scale(1.0);
        }

        .option-btn.correct {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-color: #10b981;
            color: white;
            animation: correctPulse 0.6s ease-out;
            box-shadow:
                0 10px 30px -5px rgba(16, 185, 129, 0.5),
                0 0 0 4px rgba(16, 185, 129, 0.1);
        }

        .option-btn.incorrect {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            border-color: #ef4444;
            color: white;
            animation: incorrectShake 0.5s ease-out;
            box-shadow:
                0 10px 30px -5px rgba(239, 68, 68, 0.5),
                0 0 0 4px rgba(239, 68, 68, 0.1);
        }

        @keyframes correctPulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        @keyframes incorrectShake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-8px);
            }

            75% {
                transform: translateX(8px);
            }
        }

        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .option-btn:disabled:hover {
            transform: none;
        }

        .result-message {
            margin-top: 28px;
            padding: 24px;
            border-radius: 20px;
            text-align: center;
            font-size: 20px;
            font-weight: 700;
            letter-spacing: -0.2px;
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow:
                0 10px 25px -5px rgba(0, 0, 0, 0.1),
                0 8px 10px -6px rgba(0, 0, 0, 0.08);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-message.success {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            color: #065f46;
            border: 2px solid #10b981;
        }

        .result-message.error {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            color: #991b1b;
            border: 2px solid #ef4444;
        }

        .result-message:empty {
            display: none;
        }

        .next-btn {
            margin-top: 20px;
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 16px;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #d946ef 100%);
            color: white;
            font-size: 18px;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            letter-spacing: 0.3px;
            box-shadow:
                0 10px 25px -5px rgba(99, 102, 241, 0.4),
                0 8px 10px -6px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
        }

        .next-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .next-btn:hover::before {
            width: 400px;
            height: 400px;
        }

        .next-btn:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow:
                0 20px 40px -8px rgba(99, 102, 241, 0.5),
                0 12px 20px -6px rgba(0, 0, 0, 0.2);
        }

        .next-btn:active {
            transform: translateY(-2px) scale(1.0);
        }

        /* Mobile responsive styles */
        @media (max-width: 768px) {
            body {
                padding: 0;
                justify-content: flex-start;
            }

            .container {
                max-width: 100%;
                min-height: 100vh;
                border-radius: 0;
                display: flex;
                flex-direction: column;
            }

            .header {
                padding: 12px 16px;
            }

            h1 {
                font-size: 20px;
                margin-bottom: 0;
            }

            .subtitle {
                display: none;
            }

            .score-tracker {
                gap: 12px;
                margin-top: 8px;
            }

            .score-item {
                padding: 6px 12px;
            }

            .score-icon {
                font-size: 16px;
            }

            .score-value {
                font-size: 18px;
                min-width: 24px;
            }

            #map {
                height: 38vh;
                flex-shrink: 0;
            }

            .controls {
                padding: 16px 14px 14px;
                flex: 1;
                overflow-y: auto;
            }

            .rotation-control {
                margin-bottom: 16px;
                padding: 14px;
            }

            .rotation-label {
                font-size: 13px;
                margin-bottom: 10px;
            }

            #bearing-value {
                font-size: 14px;
            }

            input[type="range"] {
                height: 8px;
            }

            .guess-section {
                margin-top: 12px;
            }

            .guess-title {
                font-size: 16px;
                margin-bottom: 12px;
            }

            .options-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .option-btn {
                padding: 14px 12px;
                font-size: 15px;
                border-width: 2px;
            }

            .result-message {
                margin-top: 14px;
                padding: 16px;
                font-size: 16px;
            }

            .next-btn {
                margin-top: 12px;
                padding: 14px;
                font-size: 16px;
            }

            input[type="range"]::-webkit-slider-thumb {
                width: 22px;
                height: 22px;
                border-width: 3px;
            }

            input[type="range"]::-moz-range-thumb {
                width: 22px;
                height: 22px;
                border-width: 3px;
            }
        }

        /* Extra small mobile devices (iPhone SE and similar) */
        @media (max-width: 480px) {
            .header {
                padding: 10px 14px;
            }

            h1 {
                font-size: 18px;
            }

            #map {
                height: 35vh;
            }

            .controls {
                padding: 12px 12px 10px;
            }

            .rotation-control {
                margin-bottom: 12px;
                padding: 12px;
            }

            .rotation-label {
                font-size: 12px;
                margin-bottom: 8px;
            }

            #bearing-value {
                font-size: 13px;
            }

            input[type="range"] {
                height: 7px;
            }

            .guess-section {
                margin-top: 10px;
            }

            .guess-title {
                font-size: 15px;
                margin-bottom: 10px;
            }

            .options-grid {
                gap: 8px;
            }

            .option-btn {
                padding: 12px 10px;
                font-size: 14px;
            }

            .result-message {
                margin-top: 12px;
                padding: 14px;
                font-size: 15px;
            }

            .next-btn {
                margin-top: 10px;
                padding: 13px;
                font-size: 15px;
            }

            input[type="range"]::-webkit-slider-thumb {
                width: 20px;
                height: 20px;
            }

            input[type="range"]::-moz-range-thumb {
                width: 20px;
                height: 20px;
            }
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            .container {
                background: rgba(30, 41, 59, 0.95);
            }

            .controls {
                background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
            }

            .rotation-control {
                background: #1e293b;
                box-shadow:
                    0 10px 25px -5px rgba(0, 0, 0, 0.3),
                    0 8px 10px -6px rgba(0, 0, 0, 0.4);
            }

            .rotation-label {
                color: #cbd5e1;
            }

            .guess-title {
                color: #f1f5f9;
            }

            .option-btn {
                background: #334155;
                border-color: #475569;
                color: #f1f5f9;
            }

            .option-btn:hover {
                background: #3f4a5e;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üåç Guess the Country</h1>
            <p class="subtitle">Rotate and identify the country!</p>
            <div class="score-tracker">
                <div class="score-item">
                    <span class="score-icon">‚úÖ</span>
                    <span class="score-value" id="correct-count">0</span>
                </div>
                <div class="score-item">
                    <span class="score-icon">‚ùå</span>
                    <span class="score-value" id="wrong-count">0</span>
                </div>
            </div>
        </div>

        <div id="map"></div>

        <div class="controls">
            <div class="rotation-control">
                <div class="rotation-label">
                    <span>Rotate Map</span>
                    <span id="bearing-value">0¬∞</span>
                </div>
                <input type="range" id="rotation-slider" min="0" max="360" value="0" step="1">
            </div>

            <div class="guess-section">
                <div class="guess-title">Which country is this?</div>
                <div class="options-grid" id="options-container"></div>
                <div id="result-message"></div>
            </div>
        </div>
    </div>

    <script>
        let map;
        let countriesData;
        let currentCountry;
        let options = [];
        let gameEnded = false;
        let correctCount = 0;
        let wrongCount = 0;

        // Initialize the map
        function initMap() {
            map = new maplibregl.Map({
                container: 'map',
                style: {
                    version: 8,
                    sources: {},
                    layers: []
                },
                center: [0, 0],
                zoom: 1,
                bearing: 0,
                pitch: 0
            });

            map.on('load', () => {
                loadCountriesData();
            });
        }

        // List of territories to exclude (not sovereign countries)
        const excludedTerritories = [
            "American Samoa", "Anguilla", "Aruba", "Azores", "Bermuda", "Bonaire",
            "Bouvet Island", "British Indian Ocean Territory", "British Virgin Islands",
            "Canarias", "Cayman Islands", "Christmas Island", "Cocos Islands", "Cook Islands",
            "Curacao", "Falkland Islands", "Faroe Islands", "French Guiana", "French Polynesia",
            "French Southern Territories", "Gibraltar", "Glorioso Islands", "Greenland",
            "Guadeloupe", "Guam", "Guernsey", "Heard Island and McDonald Islands",
            "Isle of Man", "Jersey", "Juan De Nova Island", "Madeira", "Martinique", "Mayotte",
            "Montserrat", "New Caledonia", "Niue", "Norfolk Island", "Northern Mariana Islands",
            "Palestinian Territory", "Pitcairn", "Puerto Rico", "R√©union", "Saba",
            "Saint Barthelemy", "Saint Eustatius", "Saint Helena", "Saint Martin",
            "Saint Pierre and Miquelon", "Sint Maarten",
            "South Georgia and South Sandwich Islands", "Svalbard", "Tokelau",
            "Turks and Caicos Islands", "United States Minor Outlying Islands",
            "US Virgin Islands", "Wallis and Futuna"
        ];

        // Load GeoJSON data
        async function loadCountriesData() {
            try {
                const response = await fetch('world.json');
                const data = await response.json();

                // Filter out non-sovereign territories
                countriesData = {
                    type: data.type,
                    features: data.features.filter(feature =>
                        !excludedTerritories.includes(feature.properties.COUNTRY)
                    )
                };

                console.log(`Loaded ${countriesData.features.length} sovereign countries`);
                startNewGame();
            } catch (error) {
                console.error('Error loading GeoJSON:', error);
                alert('Please make sure your world.json file is in the same directory!');
            }
        }

        // Start a new game
        function startNewGame() {
            gameEnded = false;
            document.getElementById('result-message').innerHTML = '';

            // Select random country
            const randomIndex = Math.floor(Math.random() * countriesData.features.length);
            currentCountry = countriesData.features[randomIndex];

            // Generate random rotation
            const randomBearing = Math.floor(Math.random() * 360);

            // Update map - show only country without world map
            displayCountry(currentCountry, randomBearing, false);

            // Generate options
            generateOptions();
        }

        // Display country on map
        function displayCountry(country, bearing, showWorldMap) {
            // Remove existing layers
            if (map.getLayer('country-fill')) map.removeLayer('country-fill');
            if (map.getLayer('country-border')) map.removeLayer('country-border');
            if (map.getLayer('country-highlight')) map.removeLayer('country-highlight');
            if (map.getLayer('raster-layer')) map.removeLayer('raster-layer');

            // Remove existing sources
            if (map.getSource('country')) map.removeSource('country');
            if (map.getSource('osm-tiles')) map.removeSource('osm-tiles');

            if (showWorldMap) {
                // Add OpenStreetMap raster tiles as base layer
                map.addSource('osm-tiles', {
                    type: 'raster',
                    tiles: [
                        'https://tile.openstreetmap.org/{z}/{x}/{y}.png'
                    ],
                    tileSize: 256,
                    attribution: '¬© OpenStreetMap contributors'
                });

                map.addLayer({
                    id: 'raster-layer',
                    type: 'raster',
                    source: 'osm-tiles',
                    minzoom: 0,
                    maxzoom: 22
                });
            }

            // Add country source
            map.addSource('country', {
                type: 'geojson',
                data: {
                    type: 'FeatureCollection',
                    features: [country]
                }
            });

            if (!showWorldMap) {
                // Show only country shape (dark fill)
                map.addLayer({
                    id: 'country-fill',
                    type: 'fill',
                    source: 'country',
                    paint: {
                        'fill-color': '#333',
                        'fill-opacity': 0.8
                    }
                });
            } else {
                // Highlight country on world map
                map.addLayer({
                    id: 'country-highlight',
                    type: 'fill',
                    source: 'country',
                    paint: {
                        'fill-color': '#ff6b6b',
                        'fill-opacity': 0.6
                    }
                });
            }

            // Add border layer with white borders
            map.addLayer({
                id: 'country-border',
                type: 'line',
                source: 'country',
                paint: {
                    'line-color': '#ffffff',
                    'line-width': showWorldMap ? 3 : 3
                }
            });

            // Fit map to appropriate bounds
            const bounds = new maplibregl.LngLatBounds();
            const coordinates = country.geometry.coordinates;

            function addCoordinates(coords) {
                if (Array.isArray(coords[0])) {
                    coords.forEach(coord => addCoordinates(coord));
                } else {
                    bounds.extend(coords);
                }
            }

            addCoordinates(coordinates);

            if (showWorldMap) {
                // Show world map with country highlighted - zoom out a bit
                map.fitBounds(bounds, {
                    padding: 100,
                    bearing: 0,
                    duration: 1500,
                    maxZoom: 6
                });
            } else {
                // Show only country
                map.fitBounds(bounds, {
                    padding: 50,
                    bearing: bearing,
                    duration: 1000
                });
            }

            // Update slider
            if (!showWorldMap) {
                document.getElementById('rotation-slider').value = bearing;
                document.getElementById('bearing-value').textContent = bearing + '¬∞';
            }
        }

        // Generate answer options
        function generateOptions() {
            options = [currentCountry];

            // Add 3 random wrong answers
            while (options.length < 4) {
                const randomCountry = countriesData.features[Math.floor(Math.random() * countriesData.features.length)];
                if (!options.includes(randomCountry)) {
                    options.push(randomCountry);
                }
            }

            // Shuffle options
            options.sort(() => Math.random() - 0.5);

            // Display options
            const container = document.getElementById('options-container');
            container.innerHTML = '';

            options.forEach(country => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                button.textContent = country.properties.COUNTRY;
                button.onclick = () => checkAnswer(country, button);
                container.appendChild(button);
            });
        }

        // Check answer
        function checkAnswer(selectedCountry, button) {
            if (gameEnded) return;

            gameEnded = true;
            const isCorrect = selectedCountry === currentCountry;

            // Update counters
            if (isCorrect) {
                correctCount++;
                document.getElementById('correct-count').textContent = correctCount;
            } else {
                wrongCount++;
                document.getElementById('wrong-count').textContent = wrongCount;
            }

            // Show world map with highlighted country
            displayCountry(currentCountry, 0, true);

            // Disable slider when showing world map
            document.getElementById('rotation-slider').disabled = true;

            // Disable all buttons and highlight correct/incorrect
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(btn => {
                btn.disabled = true;
                if (btn.textContent === currentCountry.properties.COUNTRY) {
                    btn.classList.add('correct');
                } else if (btn === button && !isCorrect) {
                    btn.classList.add('incorrect');
                }
            });

            // Show result message
            const resultDiv = document.getElementById('result-message');
            if (isCorrect) {
                resultDiv.className = 'result-message success';
                resultDiv.innerHTML = `üéâ Correct! It's ${currentCountry.properties.COUNTRY}!`;
            } else {
                resultDiv.className = 'result-message error';
                resultDiv.innerHTML = `‚ùå Wrong! It was ${currentCountry.properties.COUNTRY}`;
            }

            // Add next button
            const nextBtn = document.createElement('button');
            nextBtn.className = 'next-btn';
            nextBtn.textContent = 'Next Country ‚Üí';
            nextBtn.onclick = () => {
                document.getElementById('rotation-slider').disabled = false;
                startNewGame();
            };
            resultDiv.appendChild(nextBtn);
        }

        // Handle rotation slider
        document.getElementById('rotation-slider').addEventListener('input', (e) => {
            const bearing = parseInt(e.target.value);
            map.setBearing(bearing);
            document.getElementById('bearing-value').textContent = bearing + '¬∞';
        });

        // Initialize
        initMap();
    </script>
</body>

</html>